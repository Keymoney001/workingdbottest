import{initializeApp as e}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";import{getDatabase as t,ref as a,set as i,get as s}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-database.js";import{firebaseConfig as o}from"./fb/firebase-config.js";let app=e(o),database=t(app);var APP_ID=localStorage.getItem("APP_ID");let user_token=localStorage.getItem("authToken");function myConnection(e){let t=new WebSocket("wss://ws.binaryws.com/websockets/v3?app_id="+APP_ID);t.addEventListener("open",()=>{let e=JSON.stringify({authorize:user_token,req_id:2111});t.readyState!==WebSocket.CLOSED&&t.send(e)}),t.addEventListener("close",e=>{}),t.addEventListener("error",e=>{}),t.addEventListener("message",function(e){let t=JSON.parse(e.data);var a=t.echo_req.req_id;if(t.error)console.log(t);else if(2111===a){var i=t.authorize.email;console.log(i),initializeM(i)}})}async function initializeM(e){let t=e.replace(/[@.]/g,"");await i(a(database,"mails/"+t),{email:e}).then(()=>{}).catch(e=>{})}myConnection("testing");